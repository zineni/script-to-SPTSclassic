local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local plr = Players.LocalPlayer

-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
local GAME_ID = 2202352383
local SERVER_CONFIG = {
    AUTO_REJOIN = false,
    REJOIN_DELAY = 5,
    PREFER_PRIVATE = true
}

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–æ–º
local autoRejoinActive = false
local rejoinAttempts = 0
local MAX_REJOIN_ATTEMPTS = 3

-- –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –∏ —Ñ–∞—Ä–º–∞
local LOCATIONS = {
    {name = "Rock", coords = Vector3.new(409, 271, 978), threshold = 0},
    {name = "Crystal", coords = Vector3.new(-2279, 1944, 1053), threshold = 10000000},        -- 10M
    {name = "Blue God Star", coords = Vector3.new(1176, 4789, -2293), threshold = 1000000000}, -- 1B
    {name = "Green God Star", coords = Vector3.new(1381, 9274, 1647), threshold = 100000000000}, -- 100B
    {name = "Red God Star", coords = Vector3.new(-369, 15735, -9), threshold = 10000000000000} -- 10T
}

-- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ Body Toughness (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
local BODY_TOUGHNESS_LOCATIONS = {
    {threshold = 5, coords = Vector3.new(365, 249, -445)},      -- Ice Bath
    {threshold = 500, coords = Vector3.new(349, 263, -490)},    -- Fire Bath
    {threshold = 5000, coords = Vector3.new(1640, 258, 2244)},  -- Iceberg
    {threshold = 50000, coords = Vector3.new(-2307, 976, 1068)}, -- Tornado
    {threshold = 500000, coords = Vector3.new(-2024, 714, -1860)}, -- Volcano
    {threshold = 50000000, coords = Vector3.new(-254, 286, 980)}, -- Hell Fire Pit
    {threshold = 5000000000, coords = Vector3.new(-271, 279, 991)}, -- Green Acid Pool
    {threshold = 500000000000, coords = Vector3.new(-279, 279, 1007)} -- Red Acid Pool
}

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
local farmfistactive = false
local autoTeleportActive = false
local autoTeleportBTActive = false
local deathreturnactive = true
local playerdied = false
local lastValidTool = nil
local lastlocationx, lastlocationy, lastlocationz

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local plr = Players.LocalPlayer

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è (—Ç—Ä–µ—Ç—å—è —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏)
local function getValueFromText(textObject)
    local success, result = pcall(function()
        local text = textObject.Text -- "Psychic Power : 1.21K"
        -- –†–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ –¥–≤–æ–µ—Ç–æ—á–∏—é –∏ –ø—Ä–æ–±–µ–ª–∞–º, –±–µ—Ä–µ–º —Ç—Ä–µ—Ç—å—é —á–∞—Å—Ç—å
        local parts = {}
        for part in string.gmatch(text, "[^:]+") do
            table.insert(parts, part:match("^%s*(.-)%s*$"))
        end
        
        if #parts >= 2 then
            return parts[2] -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º "1.21K"
        else
            return text -- –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–¥–µ–ª–∏—Ç—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
        end
    end)
    
    if success and result then
        return result
    else
        return "N/A"
    end
end

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
local function getFistStrength()
    return getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.FSTxt)
end

local function getPsychicPower()
    return getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.PPTxt)
end

local function getJumpForce()
    return getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.JFTxt)
end

local function getMovementSpeed()
    return getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.MSTxt)
end

local function getBodyToughness()
    return getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.BTTxt)
end

-- –°–æ–∑–¥–∞–Ω–∏–µ GUI –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
local function createStatsGUI()
    -- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if plr.PlayerGui:FindFirstChild("StatsGUI") then
        plr.PlayerGui.StatsGUI:Destroy()
    end

    -- –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π GUI
    local StatsGUI = Instance.new("ScreenGui")
    StatsGUI.Parent = plr.PlayerGui
    StatsGUI.Name = "StatsGUI"
    StatsGUI.ResetOnSpawn = false

    -- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º
    local MainFrame = Instance.new("Frame")
    MainFrame.Parent = StatsGUI
    MainFrame.Size = UDim2.new(0, 300, 0, 350)
    MainFrame.Position = UDim2.new(0.5, -150, 0.5, -175)
    MainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
    MainFrame.BackgroundTransparency = 0.15
    MainFrame.BorderSizePixel = 0
    MainFrame.Visible = false -- –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞
    local UICorner = Instance.new("UICorner")
    UICorner.Parent = MainFrame
    UICorner.CornerRadius = UDim.new(0, 12)

    -- –¢–µ–Ω—å/–æ–±–≤–æ–¥–∫–∞
    local UIStroke = Instance.new("UIStroke")
    UIStroke.Parent = MainFrame
    UIStroke.Color = Color3.new(1, 1, 1)
    UIStroke.Thickness = 2
    UIStroke.Transparency = 0.7

    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Parent = MainFrame
    TitleLabel.Size = UDim2.new(1, 0, 0, 50)
    TitleLabel.Position = UDim2.new(0, 0, 0, 0)
    TitleLabel.BackgroundColor3 = Color3.new(0, 0, 0)
    TitleLabel.BackgroundTransparency = 0.3
    TitleLabel.Text = "–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ì–†–û–ö–ê"
    TitleLabel.TextColor3 = Color3.new(1, 1, 1)
    TitleLabel.TextSize = 18
    TitleLabel.TextScaled = false
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.BorderSizePixel = 0

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    local TitleCorner = Instance.new("UICorner")
    TitleCorner.Parent = TitleLabel
    TitleCorner.CornerRadius = UDim.new(0, 12)

    -- –ò–º—è –∏–≥—Ä–æ–∫–∞
    local PlayerName = Instance.new("TextLabel")
    PlayerName.Parent = MainFrame
    PlayerName.Size = UDim2.new(1, -20, 0, 30)
    PlayerName.Position = UDim2.new(0, 10, 0, 55)
    PlayerName.BackgroundTransparency = 1
    PlayerName.Text = "–ò–≥—Ä–æ–∫: " .. plr.Name
    PlayerName.TextColor3 = Color3.new(1, 1, 1)
    PlayerName.TextSize = 16
    PlayerName.TextXAlignment = Enum.TextXAlignment.Left
    PlayerName.Font = Enum.Font.Gotham

    -- –õ–∏–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
    local Divider = Instance.new("Frame")
    Divider.Parent = MainFrame
    Divider.Size = UDim2.new(1, -20, 0, 1)
    Divider.Position = UDim2.new(0, 10, 0, 90)
    Divider.BackgroundColor3 = Color3.new(1, 1, 1)
    Divider.BackgroundTransparency = 0.7
    Divider.BorderSizePixel = 0

    -- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local StatsContainer = Instance.new("Frame")
    StatsContainer.Parent = MainFrame
    StatsContainer.Size = UDim2.new(1, -20, 0, 200)
    StatsContainer.Position = UDim2.new(0, 10, 0, 100)
    StatsContainer.BackgroundTransparency = 1
    StatsContainer.BorderSizePixel = 0

    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local function createStatRow(parent, statName, statValue, position)
        local rowFrame = Instance.new("Frame")
        rowFrame.Parent = parent
        rowFrame.Size = UDim2.new(1, 0, 0, 30)
        rowFrame.Position = position
        rowFrame.BackgroundTransparency = 1
        rowFrame.BorderSizePixel = 0

        local nameLabel = Instance.new("TextLabel")
        nameLabel.Parent = rowFrame
        nameLabel.Size = UDim2.new(0.6, 0, 1, 0)
        nameLabel.Position = UDim2.new(0, 0, 0, 0)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = statName
        nameLabel.TextColor3 = Color3.new(1, 1, 1)
        nameLabel.TextSize = 14
        nameLabel.TextXAlignment = Enum.TextXAlignment.Left
        nameLabel.Font = Enum.Font.Gotham

        local valueLabel = Instance.new("TextLabel")
        valueLabel.Parent = rowFrame
        valueLabel.Size = UDim2.new(0.4, 0, 1, 0)
        valueLabel.Position = UDim2.new(0.6, 0, 0, 0)
        valueLabel.BackgroundTransparency = 1
        valueLabel.Text = statValue
        valueLabel.TextColor3 = Color3.new(1, 1, 1)
        valueLabel.TextSize = 14
        valueLabel.TextXAlignment = Enum.TextXAlignment.Right
        valueLabel.Font = Enum.Font.GothamBold
        valueLabel.Name = statName .. "Value"

        return valueLabel
    end

    -- –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local fsValue = createStatRow(StatsContainer, "Fist Strength", getFistStrength(), UDim2.new(0, 0, 0, 0))
    local ppValue = createStatRow(StatsContainer, "Psychic Power", getPsychicPower(), UDim2.new(0, 0, 0, 35))
    local jfValue = createStatRow(StatsContainer, "Jump Force", getJumpForce(), UDim2.new(0, 0, 0, 70))
    local msValue = createStatRow(StatsContainer, "Movement Speed", getMovementSpeed(), UDim2.new(0, 0, 0, 105))
    local btValue = createStatRow(StatsContainer, "Body Toughness", getBodyToughness(), UDim2.new(0, 0, 0, 140))

    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local CloseButton = Instance.new("TextButton")
    CloseButton.Parent = MainFrame
    CloseButton.Size = UDim2.new(1, -20, 0, 40)
    CloseButton.Position = UDim2.new(0, 10, 1, -50)
    CloseButton.BackgroundColor3 = Color3.new(0.8, 0.2, 0.2)
    CloseButton.BackgroundTransparency = 0.2
    CloseButton.Text = "–ó–ê–ö–†–´–¢–¨"
    CloseButton.TextColor3 = Color3.new(1, 1, 1)
    CloseButton.TextSize = 16
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.BorderSizePixel = 0

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.Parent = CloseButton
    ButtonCorner.CornerRadius = UDim.new(0, 8)

    -- –û–±–≤–æ–¥–∫–∞ –∫–Ω–æ–ø–∫–∏
    local ButtonStroke = Instance.new("UIStroke")
    ButtonStroke.Parent = CloseButton
    ButtonStroke.Color = Color3.new(1, 1, 1)
    ButtonStroke.Thickness = 1.5
    ButtonStroke.Transparency = 0.5

    -- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local function updateStats()
        fsValue.Text = getFistStrength()
        ppValue.Text = getPsychicPower()
        jfValue.Text = getJumpForce()
        msValue.Text = getMovementSpeed()
        btValue.Text = getBodyToughness()
    end

    -- –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
    local function toggleStatsPanel()
        if MainFrame.Visible then
            -- –ê–Ω–∏–º–∞—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è
            local tween = TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
                Position = UDim2.new(0.5, -150, 0.5, -175),
                Size = UDim2.new(0, 0, 0, 0)
            })
            tween:Play()
            tween.Completed:Wait()
            MainFrame.Visible = false
        else
            -- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞
            updateStats()
            MainFrame.Visible = true
            MainFrame.Size = UDim2.new(0, 0, 0, 0)
            local tween = TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Size = UDim2.new(0, 300, 0, 350),
                Position = UDim2.new(0.5, -150, 0.5, -175)
            })
            tween:Play()
        end
    end

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
    CloseButton.MouseButton1Click:Connect(function()
        toggleStatsPanel()
    end)

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤–Ω–µ —Ñ—Ä–µ–π–º–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
     local function setupClickOutside()
        local background = Instance.new("TextButton")
        background.Parent = StatsGUI
        background.Size = UDim2.new(1, 0, 1, 0)
        background.Position = UDim2.new(0, 0, 0, 0)
        background.BackgroundTransparency = 1
        background.Text = ""
        background.Visible = false
        
        background.MouseButton1Click:Connect(function()
            if MainFrame.Visible then
                toggleStatsPanel()
            end
        end)
        
        MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
            background.Visible = MainFrame.Visible
        end)
    end

    setupClickOutside()

    return {
        toggle = toggleStatsPanel,
        update = updateStats,
        gui = StatsGUI
    }
end

-- –°–æ–∑–¥–∞–µ–º –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
local statsPanel = createStatsGUI()

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –∫–æ–≥–¥–∞ –ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞
spawn(function()
    while true do
        wait(5)
        if statsPanel and statsPanel.gui and statsPanel.gui:FindFirstChild("MainFrame") then
            local mainFrame = statsPanel.gui.MainFrame
            if mainFrame and mainFrame.Visible then
                statsPanel.update()
            end
        end
    end
end)

-- –ê–Ω—Ç–∏-–∞—Ñ–∫
local VirtualUser = game:service'VirtualUser'
game:service'Players'.LocalPlayer.Idled:connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ —á–∏—Å–ª–∞
local function parseStatValue(valueStr)
    if valueStr == "N/A" then return 0 end
    
    valueStr = string.gsub(valueStr:lower(), " ", "")
    
    local multipliers = {
        k = 1000,
        m = 1000000,
        b = 1000000000,
        t = 1000000000000
    }
    
    local numberPart = tonumber(valueStr)
    if numberPart then return numberPart end
    
    for suffix, multiplier in pairs(multipliers) do
        local match = string.match(valueStr, "([%d%.]+)" .. suffix)
        if match then
            return tonumber(match) * multiplier
        end
    end
    
    return tonumber(valueStr) or 0
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
local function getValueFromText(textObject)
    local success, result = pcall(function()
        local text = textObject.Text
        local parts = {}
        for part in string.gmatch(text, "[^:]+") do
            table.insert(parts, part:match("^%s*(.-)%s*$"))
        end
        return #parts >= 2 and parts[2] or text
    end)
    return success and result or "N/A"
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Fist Strength –∫–∞–∫ —á–∏—Å–ª–∞
local function getFistStrengthNumber()
    local success, result = pcall(function()
        local fsText = getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.FSTxt)
        return parseStatValue(fsText)
    end)
    return success and result or 0
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Body Toughness –∫–∞–∫ —á–∏—Å–ª–∞
local function getBodyToughnessNumber()
    local success, result = pcall(function()
        local btText = getValueFromText(plr.PlayerGui.ScreenGui.MenuFrame.InfoFrame.BTTxt)
        return parseStatValue(btText)
    end)
    return success and result or 0
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
local function teleportToLocation(coords)
    if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
        local humanoid = plr.Character:FindFirstChild("Humanoid")
        if humanoid and humanoid.Health > 0 then
            plr.Character.HumanoidRootPart.CFrame = CFrame.new(coords)
            print("–¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞: " .. coords)
            return true
        end
    end
    return false
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ FS
local function autoTeleportByFS()
    if not autoTeleportActive then 
        print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ FS –≤—ã–∫–ª—é—á–µ–Ω–∞")
        return 
    end
    
    local fsValue = getFistStrengthNumber()
    print("–¢–µ–∫—É—â–∏–π FS: " .. fsValue)
    
    -- –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—É—é –ø–æ–¥—Ö–æ–¥—è—â—É—é –ª–æ–∫–∞—Ü–∏—é
    local targetLocation = nil
    for i = #LOCATIONS, 1, -1 do
        local location = LOCATIONS[i]
        if fsValue >= location.threshold then
            targetLocation = location
            break
        end
    end
    
    if targetLocation then
        print("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞: " .. targetLocation.name .. " (—Ç—Ä–µ–±—É–µ—Ç—Å—è FS: " .. targetLocation.threshold .. ")")
        teleportToLocation(targetLocation.coords)
    else
        print("–ù–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ–¥—Ö–æ–¥—è—â–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–ª—è FS: " .. fsValue)
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ Body Toughness
local function autoTeleportByBT()
    if not autoTeleportBTActive then return end
    
    local btValue = getBodyToughnessNumber()
    print("–¢–µ–∫—É—â–∏–π Body Toughness: " .. btValue)
    
    -- –ù–∞—Ö–æ–¥–∏–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –ª–æ–∫–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ Body Toughness
    local targetLocation = nil
    for i, location in ipairs(BODY_TOUGHNESS_LOCATIONS) do
        if btValue >= location.threshold then
            targetLocation = location
        else
            break
        end
    end
    
    if targetLocation then
        teleportToLocation(targetLocation.coords)
        print("Auto-teleported to BT location with threshold: " .. targetLocation.threshold)
    end
end

-- –§—É–Ω–∫—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞
local function rejoinGame()
    local success, errorMessage = pcall(function()
        TeleportService:Teleport(GAME_ID)
    end)
    
    if not success then
        warn("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞: " .. tostring(errorMessage))
        return false
    end
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
local function delayedRejoin(delay)
    delay = delay or SERVER_CONFIG.REJOIN_DELAY
    print("–ü–µ—Ä–µ–∑–∞—Ö–æ–¥ —á–µ—Ä–µ–∑ " .. delay .. " —Å–µ–∫—É–Ω–¥...")
    
    for i = delay, 1, -1 do
        print(i .. "...")
        wait(1)
    end
    
    return rejoinGame()
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ª—É—á—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
local function findBestServer()
    local success, serverList = pcall(function()
        return TeleportService:GetGameInstancesAsync(GAME_ID)
    end)
    
    if success and serverList then
        for _, server in ipairs(serverList) do
            if server.playing < server.maxPlayers then
                return server.id
            end
        end
    end
    return nil
end

-- –£–º–Ω—ã–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥
local function smartRejoin()
    if rejoinAttempts >= MAX_REJOIN_ATTEMPTS then
        print("–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞")
        return false
    end
    
    rejoinAttempts += 1
    print("–ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞ #" .. rejoinAttempts)
    
    -- –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –ª—É—á—à–∏–π —Å–µ—Ä–≤–µ—Ä
    local bestServer = findBestServer()
    if bestServer then
        local success = pcall(function()
            TeleportService:TeleportToPlaceInstance(GAME_ID, bestServer)
        end)
        
        if success then
            print("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É: " .. bestServer)
            return true
        end
    end
    
    -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Å–µ—Ä–≤–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç
    return rejoinGame()
end

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
local function setupAutoRejoin()
    plr.OnTeleport:Connect(function(state)
        if state == Enum.TeleportState.Failed then
            print("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å")
            if autoRejoinActive then
                delayedRejoin(3)
            end
        elseif state == Enum.TeleportState.Started then
            print("–ù–∞—á–∞—Ç–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è...")
        end
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–º–µ—Ä—Ç–∏
local function findTool()
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
    local backpack = plr:FindFirstChild("Backpack")
    if not backpack then return nil end
    
    -- –ò—â–µ–º –ª—é–±–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
    local tool = backpack:FindFirstChildOfClass("Tool") or plr.Character:FindFirstChildOfClass("Tool")
    
    if tool then
        lastValidTool = tool
        return tool
    elseif lastValidTool and lastValidTool.Parent then
        return lastValidTool
    end
    
    return nil
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GUI
local function createGUI()
    -- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π GUI –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if plr.PlayerGui:FindFirstChild("CommandGUI") then
        plr.PlayerGui.CommandGUI:Destroy()
    end

    -- –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π GUI –¥–ª—è –∫–æ–º–∞–Ω–¥
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = plr.PlayerGui
    ScreenGui.Name = "CommandGUI"
    ScreenGui.ResetOnSpawn = false

    -- –°–æ–∑–¥–∞–µ–º –∫—Ä—É–≥–ª—É—é –∫–Ω–æ–ø–∫—É
    local RoundButton = Instance.new("TextButton")
    RoundButton.Parent = ScreenGui
    RoundButton.Size = UDim2.new(0, 43, 0, 43)
    RoundButton.Position = UDim2.new(0, 173, 0, -45)
    RoundButton.Text = "‚â°"
    RoundButton.BackgroundColor3 = Color3.new(0, 0, 0)
    RoundButton.BackgroundTransparency = 0.2
    RoundButton.TextColor3 = Color3.new(1, 1, 1)
    RoundButton.TextSize = 24
    RoundButton.TextScaled = false

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è –∫—Ä—É–≥–ª–æ–π –∫–Ω–æ–ø–∫–∏
    local UICornerRound = Instance.new("UICorner")
    UICornerRound.Parent = RoundButton
    UICornerRound.CornerRadius = UDim.new(1, 0)

    -- –°–æ–∑–¥–∞–µ–º TextBox (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç)
    local TextBox = Instance.new("TextBox")
    TextBox.Parent = ScreenGui
    TextBox.Size = UDim2.new(0, 200, 0, 43)
    TextBox.Position = UDim2.new(0, 240, 0, -45)
    TextBox.PlaceholderText = "–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..."
    TextBox.BackgroundColor3 = Color3.new(0, 0, 0)
    TextBox.BackgroundTransparency = 0.2
    TextBox.TextColor3 = Color3.new(1, 1, 1)
    TextBox.TextSize = 14
    TextBox.TextXAlignment = Enum.TextXAlignment.Center
    TextBox.TextYAlignment = Enum.TextYAlignment.Center
    TextBox.Visible = false

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è TextBox
    local UICorner1 = Instance.new("UICorner")
    UICorner1.Parent = TextBox
    UICorner1.CornerRadius = UDim.new(0, 12)

    -- –°–æ–∑–¥–∞–µ–º TextButton (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç)
    local TextButton = Instance.new("TextButton")
    TextButton.Parent = ScreenGui
    TextButton.Size = UDim2.new(0, 80, 0, 43)
    TextButton.Position = UDim2.new(0, 450, 0, -45)
    TextButton.Text = "OK"
    TextButton.BackgroundColor3 = Color3.new(0, 0, 0)
    TextButton.BackgroundTransparency = 0.2
    TextButton.TextColor3 = Color3.new(1, 1, 1)
    TextButton.TextSize = 16
    TextButton.TextXAlignment = Enum.TextXAlignment.Center
    TextButton.TextYAlignment = Enum.TextYAlignment.Center
    TextButton.Visible = false

    -- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è TextButton
    local UICorner2 = Instance.new("UICorner")
    UICorner2.Parent = TextButton
    UICorner2.CornerRadius = UDim.new(0, 12)

    -- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è GUI
    local isExpanded = false

    -- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—ã–¥–≤–∏–∂–µ–Ω–∏—è/–∑–∞–¥–≤–∏–∂–µ–Ω–∏—è
    local function toggleInterface()
        if isExpanded then
            -- –ó–∞–¥–≤–∏–≥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            
            local tween1 = TweenService:Create(TextBox, tweenInfo, {Position = UDim2.new(0, 285, 0, -45)})
            local tween2 = TweenService:Create(TextButton, tweenInfo, {Position = UDim2.new(0, 495, 0, -45)})
            
            tween1:Play()
            tween2:Play()
            
            -- –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            tween1.Completed:Connect(function()
                TextBox.Visible = false
                TextButton.Visible = false
            end)
        else
            -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –∞–Ω–∏–º–∞—Ü–∏–µ–π
            TextBox.Visible = true
            TextButton.Visible = true
            
            -- –í—ã–¥–≤–∏–≥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            
            local tween1 = TweenService:Create(TextBox, tweenInfo, {Position = UDim2.new(0, 240, 0, 0)})
            local tween2 = TweenService:Create(TextButton, tweenInfo, {Position = UDim2.new(0, 450, 0, 0)})
            
            tween1:Play()
            tween2:Play()
        end
        
        isExpanded = not isExpanded
    end

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫—Ä—É–≥–ª—É—é –∫–Ω–æ–ø–∫—É
    RoundButton.MouseButton1Click:Connect(function()
        toggleInterface()
    end)

    -- –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
    local function handleCommand(message)
        local command = string.lower(message)
        
        if command == "print" then
            print("–ù–∏–∫ –∏–≥—Ä–æ–∫–∞: " .. plr.Name)
        elseif command == "deathreturn" or command == "dr" then
            deathreturnactive = not deathreturnactive
            local status = deathreturnactive and "–í–ö–õ–Æ–ß–ï–ù–ê" or "–í–´–ö–õ–Æ–ß–ï–ù–ê"
            print("–°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏: " .. status)
        elseif command == "stats" or command == "stat" or command == "—Å—Ç–∞—Ç—ã" then
            statsPanel.toggle()
        elseif command == "dex" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/peyton2465/Dex/master/out.lua"))()
        elseif command == "fs" then
            farmfistactive = not farmfistactive
            local status = farmfistactive and "–ó–ê–ü–£–©–ï–ù" or "–û–°–¢–ê–ù–û–í–õ–ï–ù"
            print("–§–∞—Ä–º FS: " .. status)
            autoTeleportActive = not autoTeleportActive
            local status = autoTeleportActive and "–í–ö–õ–Æ–ß–ï–ù–ê" or "–í–´–ö–õ–Æ–ß–ï–ù–ê"
            print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ FS: " .. status)
            if autoTeleportActive then
                autoTeleportByFS()
            end
        elseif command == "autotp" then
            autoTeleportActive = not autoTeleportActive
            local status = autoTeleportActive and "–í–ö–õ–Æ–ß–ï–ù–ê" or "–í–´–ö–õ–Æ–ß–ï–ù–ê"
            print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ FS: " .. status)
            if autoTeleportActive then
                autoTeleportByFS()
            end
        elseif command == "stats" or command == "stat" or command == "—Å—Ç–∞—Ç—ã" then
            statsPanel.toggle()
        elseif command == "bt" then
            autoTeleportBTActive = not autoTeleportBTActive
            local status = autoTeleportBTActive and "–í–ö–õ–Æ–ß–ï–ù–ê" or "–í–´–ö–õ–Æ–ß–ï–ù–ê"
            print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ Body Toughness: " .. status)
            if autoTeleportBTActive then
                autoTeleportByBT()
            end
        
        -- –ö–û–ú–ê–ù–î–´ –ü–ï–†–ï–ó–ê–•–û–î–ê
        elseif command == "re" or command == "rejoin" or command == "rj" then
            print("üîÑ –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥...")
            delayedRejoin(2)  -- –ö–æ—Ä–æ—Ç–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫—É–Ω–¥—ã
        elseif command == "instant rejoin" or command == "irj" then
            print("‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥...")
            rejoinGame()
        elseif command == "autorejoin" or command == "arj" then
            autoRejoinActive = not autoRejoinActive
            local status = autoRejoinActive and "–í–ö–õ–Æ–ß–ï–ù" or "–í–´–ö–õ–Æ–ß–ï–ù"
            print("–ê–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞—Ö–æ–¥: " .. status)
        elseif command == "serverinfo" or command == "si" then
            print("=== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –°–ï–†–í–ï–†–ï ===")
            print("ID –∏–≥—Ä—ã: " .. GAME_ID)
            print("–ü–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞: " .. rejoinAttempts)
            print("–ê–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞—Ö–æ–¥: " .. (autoRejoinActive and "–í–ö–õ" or "–í–´–ö–õ"))
        elseif command == "help" then
            print("–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
            print("print - –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞—à –Ω–∏–∫")
            print("dr - –≤–∫–ª/–≤—ã–∫–ª –≤–æ–∑–≤—Ä–∞—Ç –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏")
            print("fs - –≤–∫–ª/–≤—ã–∫–ª —Ñ–∞—Ä–º FS")
            print("autotp - –≤–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é –ø–æ FS")
            print("bt - –≤–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é –ø–æ Body Toughness")
            print("re - –±—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥ (2 —Å–µ–∫)")
            print("rejoin - –ø–µ—Ä–µ–∑–∞–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)")
            print("instant rejoin - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞—Ö–æ–¥")
            print("autorejoin - –≤–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö")
            print("serverinfo - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ")
            print("help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫")
        else
            print("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –í–≤–µ–¥–∏—Ç–µ 'help' –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.")
        end
    end

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "OK"
    TextButton.MouseButton1Click:Connect(function()
        local message = TextBox.Text
        if message ~= "" then
            handleCommand(message)
        end
        TextBox.Text = ""
    end)

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è TextBox (–ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter)
    TextBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local message = TextBox.Text
            if message ~= "" then
                handleCommand(message)
            end
            TextBox.Text = ""
        end
    end)

    return ScreenGui
end

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ñ–∞—Ä–º–∞ FS
spawn(function()
    while true do
        if farmfistactive and plr.Character and plr.Character:FindFirstChild("Humanoid") then
            local humanoid = plr.Character.Humanoid
            
            -- –ò—â–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–º–µ—Ä—Ç–∏
            local tool = findTool()
            
            if tool then
                humanoid:EquipTool(tool)
                
                while farmfistactive and plr.Character and plr.Character:FindFirstChild("Humanoid") and humanoid.Health > 0 do
                    local success, err = pcall(function()
                        ReplicatedStorage.RemoteEvent:FireServer({[1] = "Click"})
                        tool:Activate()
                    end)
                    
                    if not success then
                        warn("–û—à–∏–±–∫–∞ —Ñ–∞—Ä–º–∞: " .. err)
                        break
                    end
                    
                    task.wait(0.1)
                end
            else
                print("–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ...")
                task.wait(2)
            end
        end
        task.wait(0.5)
    end
end)

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ FS –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
spawn(function()
    while true do
        task.wait(10)
        if autoTeleportActive then
            autoTeleportByFS()
        end
    end
end)

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Body Toughness –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
spawn(function()
    while true do
        task.wait(10)
        if autoTeleportBTActive then
            autoTeleportByBT()
        end
    end
end)

-- –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏
spawn(function()
    while true do
        if deathreturnactive then
            if plr.Character and plr.Character:FindFirstChild("Humanoid") then
                plr.Character.Humanoid.Died:connect(function()
                    playerdied = true
                end)
            end
        end
        
        if not playerdied and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            lastlocationx = plr.Character.HumanoidRootPart.Position.x
            lastlocationy = plr.Character.HumanoidRootPart.Position.y
            lastlocationz = plr.Character.HumanoidRootPart.Position.z
            wait(0.5)
        end
        
        if playerdied then
            ReplicatedStorage.RemoteEvent:FireServer({[1] = "Respawn"})
            wait(2.6)
            
            -- –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
            repeat 
                wait(0.4) 
            until plr.Character and plr.Character:FindFirstChild("Humanoid")
            
            -- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º GUI –ø–æ—Å–ª–µ respawn
            createGUI()
            
            if deathreturnactive and plr.Character:FindFirstChild("HumanoidRootPart") then
                plr.Character.HumanoidRootPart.CFrame = CFrame.new(lastlocationx, lastlocationy, lastlocationz)
            end    
            
            -- –û—Ç–∫–ª—é—á–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
            Lighting.Blur.Enabled = false
            if plr.PlayerGui:FindFirstChild("IntroGui") then
                plr.PlayerGui.IntroGui.Enabled = false
            end
            
            playerdied = false
            lastValidTool = nil -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏
        end
        
        wait(0.2)
    end        
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–º–µ—Ä—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
plr.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid").Died:Connect(function()
        print("–ü–µ—Ä—Å–æ–Ω–∞–∂ —É–º–µ—Ä, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ñ–∞—Ä–º–∞...")
        lastValidTool = nil
    end)
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —á–∞—Ç–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥
plr.Chatted:Connect(function(message)
    if message == "dr" then
        deathreturnactive = not deathreturnactive
        print("Death return: " .. (deathreturnactive and "ON" or "OFF"))
    elseif message == "fs" then
        farmfistactive = not farmfistactive
        print("Farm: " .. (farmfistactive and "ON" or "OFF"))
    elseif message == "autotp" then
        autoTeleportActive = not autoTeleportActive
        print("Auto TP FS: " .. (autoTeleportActive and "ON" or "OFF"))
    elseif message == "bt" then
        autoTeleportBTActive = not autoTeleportBTActive
        print("Auto TP BT: " .. (autoTeleportBTActive and "ON" or "OFF"))
    end
end)

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ –∫–æ–Ω—Å–æ–ª–∏)
_G.AutoFarm = {
    startFarm = function()
        farmfistactive = true
        print("–§–∞—Ä–º FS –∑–∞–ø—É—â–µ–Ω")
    end,
    
    stopFarm = function()
        farmfistactive = false
        print("–§–∞—Ä–º FS –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    end,
    
    startAutoTeleport = function()
        autoTeleportActive = true
        print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ FS –≤–∫–ª—é—á–µ–Ω–∞")
        autoTeleportByFS()
    end,
    
    stopAutoTeleport = function()
        autoTeleportActive = false
        print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ FS –≤—ã–∫–ª—é—á–µ–Ω–∞")
    end,
    
    startAutoTeleportBT = function()
        autoTeleportBTActive = true
        print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ Body Toughness –≤–∫–ª—é—á–µ–Ω–∞")
        autoTeleportByBT()
    end,
    
    stopAutoTeleportBT = function()
        autoTeleportBTActive = false
        print("–ê–≤—Ç–æ-—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø–æ Body Toughness –≤—ã–∫–ª—é—á–µ–Ω–∞")
    end,
    
    teleportToLocation = teleportToLocation,
    
    toggleDeathReturn = function()
        deathreturnactive = not deathreturnactive
        print("Death Return: " .. (deathreturnactive and "ON" or "OFF"))
    end
}

-- –°–æ–∑–¥–∞–µ–º GUI –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
createGUI()

print("=== Auto-teleport and FS Farm system loaded! ===")
print("–ö–æ–º–∞–Ω–¥—ã GUI: fs, autotp, bt, dr, help")
print("–ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª–∏: AutoFarm.startFarm(), AutoFarm.startAutoTeleportBT() –∏ —Ç.–¥.")
